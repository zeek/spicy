# @TEST-REQUIRES: use-filecheck
# @TEST-EXEC: spicyc -p %INPUT -o output.hlt
# @TEST-EXEC: FileCheck %INPUT < output.hlt
# @TEST-EXEC: spicyc -dj %INPUT

# @TEST-DOC: Ensures captures are not removed from non-public units

module Test;

type Data = unit {
    # CHECK: hook void {{.*on_x.*}}(vector{{.*}})
    x: /(abc)/ {
        print $1;
    }

    # Ensure it is removed when captures aren't used.
    # CHECK: hook void {{.*on_y.*}}()
    y: /(def)/ {}
};
