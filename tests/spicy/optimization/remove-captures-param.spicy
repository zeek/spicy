# @TEST-REQUIRES: which FileCheck
# @TEST-EXEC: spicyc -p %INPUT | FileCheck %INPUT
# @TEST-EXEC: spicyc -dj %INPUT

# @TEST-DOC: Ensures captures are not removed from non-public units

module Test;

type Data = unit {
    # CHECK: hook void __on_x(vector<bytes> __captures);
    x: /(abc)/ {
        print $1;
    }

    # Ensure it is removed when captures aren't used.
    # CHECK: hook void __on_y();
    y: /(def)/ {}
};
