# @TEST-DOC: Checks that a reserve call gets generated for vectors of known size
#
# @TEST-REQUIRES: which FileCheck
# @TEST-EXEC: spicyc -p %INPUT | FileCheck %INPUT

module Test;

public type Data = unit {
    # The repeat variable gets constant-propagated
    # CHECK: {{[a-z_]+}}.reserve(128 <= 100 ? 128 : 100)
    vec: uint64[100];
};
