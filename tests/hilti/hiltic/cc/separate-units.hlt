# @TEST-GROUP: no-jit
#
# Test that links two modules *separately*.
#
# @TEST-EXEC: hiltic -g -x w1 world1.hlt
# @TEST-EXEC: cxx-compile -c -o world1.o w1_World1.cc
# @TEST-EXEC: cxx-compile -c -o linker1.o w1___linker__.cc
#
# @TEST-EXEC: hiltic -g -x w2 world2.hlt
# @TEST-EXEC: cxx-compile -c -o world2.o w2_World2.cc
# @TEST-EXEC: cxx-compile -c -o linker2.o w2___linker__.cc
#
# @TEST-EXEC: cxx-link -o a.out world1.o linker1.o world2.o linker2.o
# @TEST-EXEC: ./a.out | sort > output
# @TEST-EXEC: btest-diff output

@TEST-START-FILE world1.hlt

module World1 {
global string X = "Hello, world 1!";
import hilti;
hilti::print(X);
}

@TEST-END-FILE
@TEST-START-FILE world2.hlt

module World2 {
global string X = "Hello, world 2!";
import hilti;
hilti::print(X);
}

@TEST-END-FILE
